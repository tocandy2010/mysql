0. 每個辦公室的業績狀況表

    select e.officecode,sum(tmp.total)as t from customers as c 
    join employees as e on c.salesRepEmployeeNumber = e.employeeNumber 
    join (select o.customerNumber,o.orderNumber,sum(od.quantityordered * od.priceeach) as total 
    from orderdetails as od join orders as o on o.ordernumber = od.ordernumber where status = 'shipped' 
    group by o.orderNumber) as tmp on tmp.customerNumber = c.customerNumber 
    group by officecode order by t desc;


1. 業務業績排行榜, procedure  (要加時間區間,只能算shipped的)
    select e.employeeNumber,concat(e.firstName,e.lastName),sum(od.quantityordered*priceEach)as total from employees as e 
    join customers as c on employeeNumber = c.salesRepEmployeeNumber 
    join orders as o join orderdetails as od on o.orderNumber = od.orderNumber 
    where year(o.shippedDate) = 2003 && o.status = 'shipped' 
    group by employeeNumber 
    order by total desc


2. 熱銷商品排行榜, procedure  
    select p.productcode,p.productname ,sum(od.quantityordered*od.priceEach) as total from orderdetails as od 
    join products as p on p.productCode = od.productCode group by od.productCode order by total desc;


3. 業務訂單取消的比例 orders.sttaus = canceled


4. 低於商品建議售價MSRP的訂單及其實際售價95%

5. 當訂單資料被修改及刪除的時候記錄在 log 資料表中, 時間及所有資料欄位

https://github.com/bradchao/myjs2/blob/master/MySQL-Sample-Database-Schema.png

mysql -u root <路徑